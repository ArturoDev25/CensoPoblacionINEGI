<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
  <meta charset="UTF-8">
  <link rel="icon" href="/img/INEGI.png" type="image/png">
  <title th:text="${habitante.id == null ? 'Nuevo Habitante' : 'Editar Habitante'}"></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/base.css}">
  <link rel="stylesheet" th:href="@{/css/habitantes/habitantes_form.css}">
</head>

<body>
  <div class="form-wrapper">
    <div class="form-container">
      <h1 class="form-title" th:text="${habitante.id == null ? 'Nuevo Habitante' : 'Editar Habitante'}">
        Nuevo Habitante
      </h1>

      <form th:action="@{/habitantes/guardar}" th:object="${habitante}" method="post">
        <input type="hidden" th:field="*{id}">

        <!-- Informaci贸n Personal -->
        <div class="form-section">
          <h3 class="form-section-title">
            <span></span> Informaci贸n Personal
          </h3>
          
          <div class="row mb-3">
            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Nombre *</label>
              <input type="text" class="form-control-custom" th:field="*{nombre}" 
                     placeholder="Ej: Juan" required>
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Apellido Paterno</label>
              <input type="text" class="form-control-custom" th:field="*{apellidoPaterno}" 
                     placeholder="Ej: P茅rez">
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Apellido Materno</label>
              <input type="text" class="form-control-custom" th:field="*{apellidoMaterno}" 
                     placeholder="Ej: Garc铆a">
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label-custom">G茅nero</label>
              <select class="form-select-custom" th:field="*{genero}">
                <option value="">Seleccione g茅nero</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
              </select>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Edad</label>
              <input type="number" class="form-control-custom" th:field="*{edad}" 
                     min="0" max="120" placeholder="Ej: 25">
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Estado Civil</label>
              <select class="form-select-custom" th:field="*{estadoCivil}">
                <option value="">Seleccione estado civil</option>
                <option value="Soltero">Soltero(a)</option>
                <option value="Casado">Casado(a)</option>
                <option value="Divorciado">Divorciado(a)</option>
                <option value="Viudo">Viudo(a)</option>
                <option value="Uni贸n libre">Uni贸n libre</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Informaci贸n Familiar y de Vivienda -->
        <div class="form-section">
          <h3 class="form-section-title">
            <span></span> Informaci贸n Familiar y de Vivienda
          </h3>

          <div class="row mb-3">
            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Parentesco</label>
              <select class="form-select-custom" th:field="*{parentesco}">
                <option value="">Seleccione parentesco</option>
                <option value="Padre">Padre</option>
                <option value="Madre">Madre</option>
                <option value="Hijo">Hijo(a)</option>
                <option value="Esposo">Esposo(a)</option>
                <option value="Abuelo">Abuelo(a)</option>
                <option value="Nieto">Nieto(a)</option>
                <option value="Hermano">Hermano(a)</option>
                <option value="Otro familiar">Otro familiar</option>
                <option value="Sin parentesco">Sin parentesco</option>
              </select>
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Vivienda</label>
              <select class="form-select-custom" th:field="*{vivienda.id}">
                <option value="">Seleccione vivienda</option>
                <option th:each="v : ${viviendas}" 
                        th:value="${v.id}" 
                        th:text="${v.direccion + ' - ' + (v.municipio != null ? v.municipio.nombre : 'Sin municipio')}">
                </option>
              </select>
              <small class="form-text">Asocie este habitante a una vivienda registrada</small>
            </div>
          </div>
        </div>

        <!-- Informaci贸n Educativa y Laboral -->
        <div class="form-section">
          <h3 class="form-section-title">
            <span></span> Informaci贸n Educativa y Laboral
          </h3>

          <div class="row mb-3">
            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Actividad Econ贸mica</label>
              <select class="form-select-custom" th:field="*{actividadEconomica.id}">
                <option value="">Seleccione una actividad</option>
                <option th:each="act : ${actividades}" 
                        th:value="${act.id}" 
                        th:text="${act.nombre}">
                </option>
              </select>
              <small class="form-text">Actividad econ贸mica principal del habitante</small>
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label-custom">Escolaridad</label>
              <select class="form-select-custom" th:field="*{escolaridad}">
                <option value="">Seleccione escolaridad</option>
                <option value="Sin escolaridad">Sin escolaridad</option>
                <option value="Preescolar">Preescolar</option>
                <option value="Primaria">Primaria</option>
                <option value="Secundaria">Secundaria</option>
                <option value="Preparatoria">Preparatoria</option>
                <option value="T茅cnico">T茅cnico</option>
                <option value="Licenciatura">Licenciatura</option>
                <option value="Posgrado">Posgrado</option>
              </select>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-icon">癸</div>
          <div>
            <strong>Importante:</strong> Aseg煤rese de asociar este habitante a una vivienda existente 
            y seleccionar su actividad econ贸mica principal. Los campos marcados con asterisco (*) son obligatorios.
          </div>
        </div>

        <div class="form-actions">
          <a th:href="@{/habitantes}" class="btn-volver">Volver</a>
          <div>
            <button type="submit" class="btn-guardar">Guardar</button>
            <a th:href="@{/habitantes}" class="btn-cancelar">Cancelar</a>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>